# Story 2.2: Verify and Complete Content Directory Structure

### Status
- **Draft**

### Story
**As a** Developer,
**I want** to verify the existing directory structure and create any missing directories for tool articles,
**so that** content can be organized logically by tool and easily processed by Astro.

### Acceptance Criteria
1.  [ ] A `tools` directory exists inside the `src/content/` directory.
2.  [ ] Subdirectories for `anki`, `migaku`, and `yomitan` exist inside `src/content/tools/`.
3.  [ ] The directory structure is ready for content migration in the next story.

### Tasks / Subtasks
-   [ ] Task 1: Verify the `src/content/tools/` directory exists. (AC: 1)
-   [ ] Task 2: Verify the `src/content/tools/anki/` subdirectory exists. (AC: 2)
-   [ ] Task 3: Verify the `src/content/tools/migaku/` subdirectory exists. (AC: 2)
-   [ ] Task 4: Create the missing `src/content/tools/yomitan/` subdirectory. (AC: 2)
-   [ ] Task 5: Validate the complete directory structure is ready for content migration. (AC: 3)

### Dev Notes
**⚠️ CRITICAL CONSTRAINT: This story involves ONLY file system operations. NO code, styling, or configuration files should be modified. ⚠️**

This story is the foundation for all subsequent work in this epic. The following architectural and design standards **must** be adhered to in all related stories.

**Current Directory State Analysis:**
- ✅ `src/content/tools/` directory already exists
- ✅ `src/content/tools/anki/` subdirectory already exists  
- ✅ `src/content/tools/migaku/` subdirectory already exists
- ❌ `src/content/tools/yomitan/` subdirectory is missing and needs to be created

**Story Scope Adjustment:**
This story has been updated from "create directory structure" to "verify and complete directory structure" since most directories already exist. Only the `yomitan` directory needs to be created.

**CRITICAL: NO CODE CHANGES ALLOWED**
This story involves **ONLY file system operations** - creating and verifying directories. The following components must **NOT** be modified, touched, or changed in any way:

**HTML/Astro Files (src/pages/):**
- ❌ `src/pages/tools.astro` - Main tools page (34KB, 963 lines) - DO NOT MODIFY
- ❌ `src/pages/index.astro` - Homepage (15KB, 388 lines) - DO NOT MODIFY
- ❌ `src/pages/docs.astro` - Documentation page (71KB, 1982 lines) - DO NOT MODIFY
- ❌ `src/pages/settings.astro` - Settings page (7KB, 245 lines) - DO NOT MODIFY
- ❌ `src/pages/404.astro` - Error page (9KB, 347 lines) - DO NOT MODIFY
- ❌ `src/pages/mind-map.astro` - Mind map page (13KB, 532 lines) - DO NOT MODIFY
- ❌ `src/pages/discord.astro` - Discord page (11KB, 424 lines) - DO NOT MODIFY
- ❌ `src/pages/search.json.js` - Search functionality (5.6KB, 159 lines) - DO NOT MODIFY
- ❌ `src/pages/sitemap.xml.ts` - Sitemap generation (1.3KB, 55 lines) - DO NOT MODIFY
- ❌ `src/pages/tools/` directory - Do not create or modify any files here (future stories)
- ❌ `src/pages/docs/` directory - Do not modify existing documentation structure
- ❌ `src/pages/admin/` directory - Do not modify admin functionality
- ❌ Any existing `.astro` files in the project

**CSS/Styling Files (src/styles/):**
- ❌ `src/styles/global.css` - Global styles (40KB, 1434 lines) - DO NOT MODIFY
- ❌ `src/styles/tools/` directory - Tool-specific styles - DO NOT MODIFY
- ❌ `src/styles/homepage/` directory - Homepage styles - DO NOT MODIFY
- ❌ `src/styles/docs/` directory - Documentation styles - DO NOT MODIFY
- ❌ `tailwind.config.mjs` - Tailwind configuration - DO NOT MODIFY
- ❌ Any existing styling or component styles

**JavaScript/TypeScript Files:**
- ❌ `src/content/config.ts` - Content collection schema (already completed in Story 2.1) - DO NOT MODIFY
- ❌ `src/content/content-config.ts` - Content configuration (18KB, 727 lines) - DO NOT MODIFY
- ❌ `src/components/` directory - All component files - DO NOT MODIFY
  - `src/components/homepage/` - Homepage components
  - `src/components/public-components/` - Public UI components
  - `src/components/docs/` - Documentation components
  - `src/components/mind-map/` - Mind map components
  - `src/components/pages/` - Page-specific components
  - `src/components/search/` - Search functionality components
  - `src/components/content/` - Content-related components
- ❌ `src/utils/` directory - Utility functions (62 files) - DO NOT MODIFY
- ❌ `src/types/` directory - TypeScript type definitions - DO NOT MODIFY
- ❌ `src/data/` directory - Data files - DO NOT MODIFY
- ❌ `src/layouts/` directory - Layout components - DO NOT MODIFY
- ❌ `src/assets/` directory - Asset files - DO NOT MODIFY
- ❌ `src/scripts/` directory - Script files (19 files) - DO NOT MODIFY
- ❌ `astro.config.mjs` - Astro configuration - DO NOT MODIFY
- ❌ `package.json` - Dependencies and scripts - DO NOT MODIFY
- ❌ `tsconfig.json` - TypeScript configuration - DO NOT MODIFY

**What This Story DOES:**
- ✅ Create missing `src/content/tools/yomitan/` directory
- ✅ Verify existing directory structure
- ✅ Validate directory permissions and accessibility

**What This Story DOES NOT:**
- ❌ Create any code files
- ❌ Modify existing code
- ❌ Change configuration files
- ❌ Add new components or pages
- ❌ Modify styling or layout

#### Responsive Design Strategy
-   **Mobile-First Approach:** All UI components and layouts must be developed mobile-first. Styles should be written for the smallest breakpoint (`320px`) first, and then use `min-width` media queries to add or adjust styles for larger screens.

#### Breakpoints
-   The following official project breakpoints must be used:
    -   `320px` (Smallest mobile devices)
    -   `640px` (sm, Large mobile / small tablets)
    -   `768px` (md, Tablets)
    -   `1024px` (lg, Laptops/Desktops)
    -   `1280px` (xl, Large desktops)

#### CSS Unit Usage Guide
-   **REM:** This is the **preferred and default unit** for most CSS properties, including `font-size`, `margin`, `padding`, and `width`/`height` on containers. It ensures a predictable and scalable design relative to the root font size.
-   **EM:** Use `em` units for properties that need to scale relative to the `font-size` of their direct parent. This is useful for things like the padding on a button or the size of an icon within a text element.
-   **PX:** Use `px` units sparingly and only for properties that require a fixed, non-scalable value. Good use cases include `border-width`, `box-shadow` offsets, or the dimensions of a raster image like a logo.

#### Risk Assessment Integration
Based on QA risk assessment, this story has been identified with **6 total risks** and a **risk score of 87/100**. Key risk areas to address during implementation:

**High Risk (Must Mitigate):**
- **TECH-001**: Directory permission issues (Score: 6) - Verify full read/write permissions to `src/content/` directory before implementation

**Medium Risk (Require Mitigation):**
- **TECH-002**: Astro build system recognition (Score: 4) - Test build process and verify configuration compatibility
- **OPS-001**: Development server compatibility (Score: 4) - Validate hot reload and file serving functionality

**Low Risk (Monitor):**
- **TECH-003**: Directory naming conflicts (Score: 2) - Scan for existing conflicts
- **OPS-002**: Schema compatibility (Score: 2) - Validate against content collection schema
- **BUS-001**: Content migration blocking (Score: 2) - Ensure readiness for story 2.3

**Risk Mitigation Strategy**: Execute P0 tests first (fail fast), then P1 tests, followed by P2 tests to ensure comprehensive coverage.

### Testing

#### Testing Standards
-   **Test file location**: No test files required for directory structure creation
-   **Test standards**: Manual verification through file system checks with risk-based testing approach
-   **Testing frameworks and patterns**: File system validation using standard directory existence checks, integration testing with Astro build system
-   **Specific testing requirements**: Verify directory structure matches the acceptance criteria exactly, validate against identified risks from QA risk assessment

#### Validation Steps
1.  **Directory Existence Validation**:
    -   Verify the `src/content/tools/` directory exists
    -   Verify the `src/content/tools/anki/` subdirectory exists
    -   Verify the `src/content/tools/migaku/` subdirectory exists
    -   Verify the `src/content/tools/yomitan/` subdirectory exists (after creation)

2.  **Structure Readiness Validation**:
    -   Verify the directory structure is ready to receive content files in the next story (2.3)
    -   Confirm no conflicting files or directories exist that would block content migration
    -   Validate that the directory structure follows the project's naming conventions

3.  **Integration Testing**:
    -   Verify that Astro can detect the complete directory structure (run `npm run build` to ensure no build errors)
    -   Confirm the directories are properly recognized by the development server
    -   Test that the structure is compatible with the content collection schema defined in Story 2.1

#### Success Criteria Verification
-   **AC 1**: `ls src/content/tools` command shows the tools directory exists
-   **AC 2**: `ls src/content/tools/` command shows `anki`, `migaku`, and `yomitan` directories
-   **AC 3**: Directory structure is validated and ready for content migration (no blocking issues identified)

#### Test Execution Order
Follow this simple validation order for the directory structure:

1.  **Directory Verification**:
    -   Verify existing directories (`tools`, `anki`, `migaku`)
    -   Create missing directory (`yomitan`)

2.  **Structure Validation**:
    -   Confirm all directories are accessible and ready for content

3.  **Integration Testing**:
    -   Verify Astro build system compatibility
    -   Test development server functionality

#### Test Environment Requirements
-   **File System Access**: Full read/write permissions to `src/content/` directory
-   **Build Environment**: Node.js with Astro CLI installed
-   **Development Server**: Astro dev server running
-   **File Explorer**: Access to verify directory structure visually
-   **Risk Mitigation**: Execute permission validation before directory creation

### Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2024-12-19 | 1.0 | Initial draft of the story. | Sarah (PO) |
| 2024-12-19 | 1.1 | Critical fixes: Updated scope to verify existing directories, added missing yomitan directory task, corrected AC mapping, simplified testing approach | Sarah (PO) |

### Dev Agent Record

This section is populated by the development agent during implementation.

#### Agent Model Used
- **Draft**
**Agent Model Name and Version:** (To be filled by dev agent)
**Example:** "Claude Sonnet 4", "GPT-4", "Gemini Pro", etc.

#### Debug Log References

*To be populated by development agent during implementation*

#### Completion Notes List

*To be populated by development agent with notes about task completion and any issues encountered*

#### File List

*To be populated by development agent with all directories created during story implementation*

### QA Results

*Results from QA Agent QA review of the completed story implementation*
